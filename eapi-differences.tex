\chapter{Feature Availability by EAPI}

\note This chapter is informative and for convenience only. Refer to the main text for specifics.

\begin{landscape}
\begin{longtable}{\IFANYKDEBUILDELSE{lllllll}{llllll}}
\caption{Features in EAPIs}\\
\toprule
\multicolumn{1}{c}{\b{Feature}} &
\multicolumn{1}{c}{\b{Reference}} &
\IFANYKDEBUILDELSE{\multicolumn{4}{c}{\b{EAPIs}} \\}{\multicolumn{3}{c}{\b{EAPIs}} \\}
\multicolumn{1}{c}{} &
\multicolumn{1}{c}{} &
\multicolumn{1}{c}{0} &
\multicolumn{1}{c}{1} &
\IFANYKDEBUILDELSE{\multicolumn{1}{c}{\IFKDEBUILDCOLOUR{kdebuild-1}} &}{}
\multicolumn{1}{c}{2} &
\multicolumn{1}{c}{3} \\
\midrule
\endfirsthead
\midrule
\multicolumn{1}{c}{\b{Feature}} &
\multicolumn{1}{c}{\b{Reference}} &
\IFANYKDEBUILDELSE{\multicolumn{4}{c}{\b{EAPIs}} \\}{\multicolumn{3}{c}{\b{EAPIs}} \\}
\multicolumn{1}{c}{} &
\multicolumn{1}{c}{} &
\multicolumn{1}{c}{0} &
\multicolumn{1}{c}{1} &
\IFANYKDEBUILDELSE{\multicolumn{1}{c}{\IFKDEBUILDCOLOUR{kdebuild-1}} &}{}
\multicolumn{1}{c}{2} &
\multicolumn{1}{c}{3} \\
\midrule
\endhead
\midrule
\endfoot
\bottomrule
\endlastfoot

\IFANYKDEBUILDELSE{
    \IFKDEBUILDCOLOUR{\t{scm} support} &
    \IFKDEBUILDCOLOUR{table~\ref{tab:scm-table}} &
    \IFKDEBUILDCOLOUR{Optional} &
    \IFKDEBUILDCOLOUR{Optional} &
    \IFKDEBUILDCOLOUR{Required} &
    \IFKDEBUILDCOLOUR{Optional} &
    \IFKDEBUILDCOLOUR{Optional} \\
}{}

\IFANYKDEBUILDELSE{
    \IFKDEBUILDCOLOUR{File extension} &
    \IFKDEBUILDCOLOUR{section~\ref{file-extension}} &
    \IFKDEBUILDCOLOUR{\t{.ebuild}} &
    \IFKDEBUILDCOLOUR{\t{.ebuild}} &
    \IFKDEBUILDCOLOUR{\t{.kdebuild-1}} &
    \IFKDEBUILDCOLOUR{\t{.ebuild}} &
    \IFKDEBUILDCOLOUR{\t{.ebuild}} \\
}{}

\t{IUSE} defaults & table~\ref{tab:iuse-defaults-table} & No & Yes &
    \IFANYKDEBUILDELSE{\IFKDEBUILDCOLOUR{Yes} &}{} Yes & Yes \\

\IFANYKDEBUILDELSE{
    \IFKDEBUILDCOLOUR{\t{PROVIDE} support} &
    \IFKDEBUILDCOLOUR{table~\ref{tab:provide-table}} &
    \IFKDEBUILDCOLOUR{Yes} &
    \IFKDEBUILDCOLOUR{Yes} &
    \IFKDEBUILDCOLOUR{No} &
    \IFKDEBUILDCOLOUR{Yes} &
    \IFKDEBUILDCOLOUR{Yes} \\
}{}

\t{PROPERTIES} & table~\ref{tab:properties-table} & Optionally & Optionally &
    \IFANYKDEBUILDELSE{\IFKDEBUILDCOLOUR{Optionally} &}{} Optionally & Yes \\

\t{DEFINED\_PHASES} & table~\ref{tab:defined-phases-table} & Optionally & Optionally &
    \IFANYKDEBUILDELSE{\IFKDEBUILDCOLOUR{Optionally} &}{} Optionally & Yes \\

\IFANYKDEBUILDELSE{
    \IFKDEBUILDCOLOUR{Pre-source \t{EAPI}} &
    \IFKDEBUILDCOLOUR{section~\ref{sec:pre-source-eapi}} &
    \IFKDEBUILDCOLOUR{0 or unset} &
    \IFKDEBUILDCOLOUR{0 or unset} &
    \IFKDEBUILDCOLOUR{kdebuild-1} &
    \IFKDEBUILDCOLOUR{0 or unset} &
    \IFKDEBUILDCOLOUR{0 or unset} \\
}{}

\t{SRC\_URI} arrows & table~\ref{tab:uri-arrows-table} & No & No &
    \IFANYKDEBUILDELSE{\IFKDEBUILDCOLOUR{Yes} &}{} Yes & Yes \\

\IFANYKDEBUILDELSE{
    \IFKDEBUILDCOLOUR{\t{SRC\_URI} labels} &
    \IFKDEBUILDCOLOUR{table~\ref{tab:uri-labels-table}} &
    \IFKDEBUILDCOLOUR{No} &
    \IFKDEBUILDCOLOUR{No} &
    \IFKDEBUILDCOLOUR{Yes} &
    \IFKDEBUILDCOLOUR{No} &
    \IFKDEBUILDCOLOUR{No} \\
}{}

\IFANYKDEBUILDELSE{
    \IFKDEBUILDCOLOUR{\t{PDEPEND} labels} &
    \IFKDEBUILDCOLOUR{table~\ref{tab:pdepend-labels-table}} &
    \IFKDEBUILDCOLOUR{No} &
    \IFKDEBUILDCOLOUR{No} &
    \IFKDEBUILDCOLOUR{Yes} &
    \IFKDEBUILDCOLOUR{No} &
    \IFKDEBUILDCOLOUR{No} \\
}{}

\IFANYKDEBUILDELSE{
    \IFKDEBUILDCOLOUR{Ranged Dependencies} &
    \IFKDEBUILDCOLOUR{table~\ref{tab:range-deps-table}} &
    \IFKDEBUILDCOLOUR{No} &
    \IFKDEBUILDCOLOUR{No} &
    \IFKDEBUILDCOLOUR{Yes} &
    \IFKDEBUILDCOLOUR{No} &
    \IFKDEBUILDCOLOUR{No} \\
}{}

Slot dependencies &
    table~\ref{tab:slot-deps-table} &
    No &
    Named &
    \IFANYKDEBUILDELSE{\IFKDEBUILDCOLOUR{Named and Operator} &}{}
    Named &
    Named and Operator \\

Use dependencies & table~\ref{tab:use-deps-table} & No & No &
    \IFANYKDEBUILDELSE{\IFKDEBUILDCOLOUR{kdebuild-style} &}{} 2-style & 3-style \\

\t{!} blockers & table~\ref{tab:bang-strength-table} & Unspecified & Unspecified &
    \IFANYKDEBUILDELSE{\IFKDEBUILDCOLOUR{Unspecified} &}{} Weak & Weak \\

\t{!!} blockers & table~\ref{tab:bang-strength-table} & Forbidden & Forbidden &
    \IFANYKDEBUILDELSE{\IFKDEBUILDCOLOUR{Forbidden} &}{} Strong & Strong \\

\t{pkg\_pretend} & table~\ref{tab:pkg-pretend-table} & No & No &
    \IFANYKDEBUILDELSE{\IFKDEBUILDCOLOUR{No} &}{} No & Yes \\

\t{src\_prepare} & table~\ref{tab:src-prepare-table} & No & No &
    \IFANYKDEBUILDELSE{\IFKDEBUILDCOLOUR{No} &}{} Yes & Yes \\

\t{src\_configure} & table~\ref{tab:src-configure-table} & No & No &
\IFANYKDEBUILDELSE{\IFKDEBUILDCOLOUR{No} &}{} Yes & Yes \\

\t{src\_compile} style & table~\ref{tab:src-compile-table} & 0 & 1 &
    \IFANYKDEBUILDELSE{\IFKDEBUILDCOLOUR{1} &}{} 2 & 2 \\

\t{src\_install} style & table~\ref{tab:src-install-table} & no-op & no-op &
    \IFANYKDEBUILDELSE{\IFKDEBUILDCOLOUR{no-op} &}{} no-op & 3 \\

\IFANYKDEBUILDELSE{
    \IFKDEBUILDCOLOUR{\t{src\_test}} &
    \IFKDEBUILDCOLOUR{table~\ref{tab:test-required-table}} &
    \IFKDEBUILDCOLOUR{User option} &
    \IFKDEBUILDCOLOUR{User option} &
    \IFKDEBUILDCOLOUR{Required} &
    \IFKDEBUILDCOLOUR{User option} &
    \IFKDEBUILDCOLOUR{User option} \\
}{}

\IFANYKDEBUILDELSE{
    \IFKDEBUILDCOLOUR{\t{pkg\_info}} &
    \IFKDEBUILDCOLOUR{table~\ref{tab:pkg-info-table}} &
    \IFKDEBUILDCOLOUR{Installed} &
    \IFKDEBUILDCOLOUR{Installed} &
    \IFKDEBUILDCOLOUR{Both} &
    \IFKDEBUILDCOLOUR{Installed} &
    \IFKDEBUILDCOLOUR{Installed} \\
}{}

\t{default\_} phase functions & table~\ref{tab:default-phase-function-table} & None & None &
    \IFANYKDEBUILDELSE{\IFKDEBUILDCOLOUR{None} &}{}
    \parbox[t]{1in}{\t{pkg\_nofetch}, \t{src\_unpack}, \t{src\_prepare}, \t{src\_configure}, \t{src\_compile}, \t{src\_test}} &
    \parbox[t]{1in}{\t{pkg\_nofetch}, \t{src\_unpack}, \t{src\_prepare}, \t{src\_configure},
        \t{src\_compile}, \t{src\_install}, \t{src\_test}} \\

\t{dohard} & table~\ref{tab:banned-commands-table} & Yes & Yes &
    \IFANYKDEBUILDELSE{\IFKDEBUILDCOLOUR{Banned} &}{} Yes & Banned \\

\IFANYKDEBUILDELSE{
    \IFKDEBUILDCOLOUR{\t{dohtml}} &
    \IFKDEBUILDCOLOUR{table~\ref{tab:banned-commands-table}} &
    \IFKDEBUILDCOLOUR{Yes} &
    \IFKDEBUILDCOLOUR{Yes} &
    \IFKDEBUILDCOLOUR{Banned} &
    \IFKDEBUILDCOLOUR{Yes} &
    \IFKDEBUILDCOLOUR{Yes} \\
}{}

\t{dosed} & table~\ref{tab:banned-commands-table} & Yes & Yes &
    \IFANYKDEBUILDELSE{\IFKDEBUILDCOLOUR{Banned} &}{} Yes & Banned \\

\t{dodoc -r} & table~\ref{tab:dodoc-table} & No & No &
    \IFANYKDEBUILDELSE{\IFKDEBUILDCOLOUR{No} &}{} No & Yes \\

\t{doins} handles symlinks & table~\ref{tab:doins-table} & No & No &
    \IFANYKDEBUILDELSE{\IFKDEBUILDCOLOUR{No} &}{} No & Yes \\

\t{doman} languages & table~\ref{tab:doman-table} & No & No &
    \IFANYKDEBUILDELSE{\IFKDEBUILDCOLOUR{No} &}{} Yes & Yes \\

\IFANYKDEBUILDELSE{
    \IFKDEBUILDCOLOUR{\t{dosym} does \t{dodir}} &
    \IFKDEBUILDCOLOUR{table~\ref{tab:dosym-table}} &
    \IFKDEBUILDCOLOUR{Yes} &
    \IFKDEBUILDCOLOUR{Yes} &
    \IFKDEBUILDCOLOUR{No} &
    \IFKDEBUILDCOLOUR{Yes} &
    \IFKDEBUILDCOLOUR{Yes} \\
}{}

Controllable compression & table~\ref{tab:compression-table} & No & No &
    \IFANYKDEBUILDELSE{\IFKDEBUILDCOLOUR{No} &}{} No & Yes \\

\t{docompress} & table~\ref{tab:compression-table} & No & No &
    \IFANYKDEBUILDELSE{\IFKDEBUILDCOLOUR{No} &}{} No & Yes \\

\t{unpack} support for \t{xz}? & table~\ref{tab:unpack-extensions-table} & No & No &
    \IFANYKDEBUILDELSE{\IFKDEBUILDCOLOUR{No} &}{} No & Yes \\

\t{default} function & table~\ref{tab:default-function-table} & No & No &
    \IFANYKDEBUILDELSE{\IFKDEBUILDCOLOUR{No} &}{} Yes & Yes \\

\end{longtable}
\end{landscape}

\chapter{Differences Between EAPIs}

\note This chapter is informative and for convenience only. Refer to the main text for specifics.

\section*{EAPI 0}

EAPI 0 is the base EAPI.

\section*{EAPI 1}

EAPI 1 is EAPI 0 with the following changes:

\begin{compactitem}
\item \t{IUSE} defaults, table~\ref{tab:iuse-defaults-table}.
\item Slot dependencies, table~\ref{tab:slot-deps-table}.
\item Different \t{src\_compile} implementation, table~\ref{tab:src-compile-table}.
\end{compactitem}

\IFKDEBUILDELSE
{
    \section*{EAPI kdebuild-1}

    EAPI kdebuild-1 is EAPI 1 with the following changes:

    \begin{compactitem}
    \item \t{scm} support, table~\ref{tab:scm-table}.
    \item \t{kdebuild-1} file extension, section~\ref{file-extension}.
    \item \t{PROVIDE} banned, table~\ref{tab:provide-table}.
    \item Pre-source EAPI is \t{kdebuild-1}, section~\ref{sec:pre-source-eapi}.
    \item \t{SRC\_URI} arrows, table~\ref{tab:uri-arrows-table}.
    \item \t{SRC\_URI} labels, table~\ref{tab:uri-labels-table}.
    \item \t{PDEPEND} labels, table~\ref{tab:pdepend-labels-table}.
    \item Ranged dependencies, table~\ref{tab:range-deps-table}.
    \item Use dependencies, table~\ref{tab:use-deps-table}.
    \item \t{src\_test} mandatory, table~\ref{tab:test-required-table}.
    \item \t{pkg\_info} can run on uninstalled packages, table~\ref{tab:pkg-info-table}.
    \item \t{dohard}, \t{dohtml}, \t{dosed} banned, table~\ref{tab:banned-commands-table}.
    \item \t{dosym} will not do \t{dodir}, table~\ref{tab:dosym-table}.
    \end{compactitem}
}{
}

\section*{EAPI 2}

EAPI 2 is EAPI 1 with the following changes:

\begin{compactitem}
\item \t{SRC\_URI} arrows, table~\ref{tab:uri-arrows-table}.
\item Use dependencies, table~\ref{tab:use-deps-table}.
\item \t{!} and \t{!!} blockers, table~\ref{tab:bang-strength-table}.
\item \t{src\_prepare}, table~\ref{tab:src-prepare-table}.
\item \t{src\_configure}, table~\ref{tab:src-configure-table}.
\item Different \t{src\_compile} implementation, table~\ref{tab:src-compile-table}.
\item \t{default\_} phase functions for phases \t{pkg\_nofetch}, \t{src\_unpack}, \t{src\_prepare},
    \t{src\_configure}, \t{src\_compile} and \t{src\_test}; table~\ref{tab:default-phase-function-table}.
\item \t{doman} languages support, table~\ref{tab:doman-table}.
\item \t{default} function, table~\ref{tab:default-function-table}.
\end{compactitem}

\section*{EAPI 3}

EAPI 3 is EAPI 2 with the following changes:

\begin{compactitem}
\item \t{pkg\_pretend}, table~\ref{tab:pkg-pretend-table}.
\item Slot operator dependencies, table~\ref{tab:slot-deps-table}.
\item Use dependency defaults, table~\ref{tab:use-deps-table}.
\item \t{DEFINED\_PHASES} support is mandatory, table~\ref{tab:defined-phases-table}.
\item \t{PROPERTIES} support is mandatory, table~\ref{tab:properties-table}.
\item Default \t{src\_install} no longer a no-op, table~\ref{tab:src-install-table}.
\item Controllable compression and \t{docompress}, table~\ref{tab:compression-table}.
\item \t{dodoc -r} support, table~\ref{tab:dodoc-table}.
\item \t{doins} supports symlinks, table~\ref{tab:doins-table}.
\item \t{dohard}, \t{dosed} banned, table~\ref{tab:banned-commands-table}.
\item \t{unpack} supports \t{.xz} and \t{.tar.xz}, table~\ref{tab:unpack-extensions-table}.
\end{compactitem}

% vim: set filetype=tex fileencoding=utf8 et tw=100 spell spelllang=en :

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "pms"
%%% End:
